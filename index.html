<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gire a Chave - Blog de Veículos Comerciais</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .flag { font-size: 1.2em; }
        .modal-backdrop { backdrop-filter: blur(8px); }
        .gradient-text { 
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .social-btn {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        .social-btn:hover {
            transform: translateY(-2px);
        }
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }
        .admin-image-input {
            min-height: 50px;
            border: 2px dashed #374151;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">

    <!-- HEADER -->
    <header class="bg-gray-800 border-b border-gray-700 sticky top-0 z-40">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <h1 class="text-3xl font-bold gradient-text">🚛 Gire a Chave</h1>
                
                <!-- Language Selector -->
                <div class="flex gap-2">
                    <button onclick="setLanguage('pt')" class="flag px-3 py-2 rounded hover:bg-gray-700" id="lang-pt">🇧🇷</button>
                    <button onclick="setLanguage('en')" class="flag px-3 py-2 rounded hover:bg-gray-700" id="lang-en">🇺🇸</button>
                    <button onclick="setLanguage('es')" class="flag px-3 py-2 rounded hover:bg-gray-700" id="lang-es">🇪🇸</button>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Welcome Section -->
        <section class="text-center mb-12">
            <h2 class="text-4xl font-bold mb-4" data-translate="welcome">Bem-vindo ao Gire a Chave</h2>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto" data-translate="subtitle">
                Seu portal completo para veículos comerciais. Informações, avaliações e dicas especializadas.
            </p>
        </section>

        <!-- Blog Posts Section -->
        <section id="blogPosts" class="space-y-8">
            <!-- Posts serão carregados dinamicamente aqui -->
        </section>

        <!-- Admin Panel -->
        <div id="adminPanel" class="hidden mt-12">
            <div class="bg-gray-900 rounded-lg border border-gray-700 p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-yellow-400">🔐 Painel Administrativo</h2>
                    <div class="flex items-center gap-4">
                        <div class="text-sm text-gray-400">
                            Logado como: <span class="text-yellow-400 font-medium">Wagner Rodrigues</span>
                        </div>
                        <button onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm">
                            Logout
                        </button>
                    </div>
                </div>

                <!-- Post Creation Form -->
                <div class="bg-gray-800 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">📝 Nova Postagem</h3>
                    
                    <!-- Category -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Categoria:</label>
                        <select id="postCategory" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2">
                            <option value="reviews">Avaliações</option>
                            <option value="news">Notícias</option>
                            <option value="tips">Dicas</option>
                            <option value="market">Mercado</option>
                            <option value="lists">Listas</option>
                        </select>
                    </div>

                    <!-- Titles (Multilingual) -->
                    <div class="grid md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">🇧🇷 Título (Português):</label>
                            <input type="text" id="titlePt" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Título em português">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">🇺🇸 Title (English):</label>
                            <input type="text" id="titleEn" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Title in English">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">🇪🇸 Título (Español):</label>
                            <input type="text" id="titleEs" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Título en español">
                        </div>
                    </div>

                    <!-- Content (Multilingual) -->
                    <div class="grid md:grid-cols-3 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">🇧🇷 Conteúdo (Português):</label>
                            <textarea id="contentPt" rows="6" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Conteúdo em português..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">🇺🇸 Content (English):</label>
                            <textarea id="contentEn" rows="6" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Content in English..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">🇪🇸 Contenido (Español):</label>
                            <textarea id="contentEs" rows="6" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Contenido en español..."></textarea>
                        </div>
                    </div>

                    <!-- Images (Up to 10) -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">📸 Imagens (até 10):</label>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 1:</label>
                                <input type="url" id="image1" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da primeira imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 2:</label>
                                <input type="url" id="image2" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da segunda imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 3:</label>
                                <input type="url" id="image3" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da terceira imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 4:</label>
                                <input type="url" id="image4" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da quarta imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 5:</label>
                                <input type="url" id="image5" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da quinta imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 6:</label>
                                <input type="url" id="image6" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da sexta imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 7:</label>
                                <input type="url" id="image7" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da sétima imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 8:</label>
                                <input type="url" id="image8" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da oitava imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 9:</label>
                                <input type="url" id="image9" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da nona imagem">
                            </div>
                            <div class="admin-image-input">
                                <label class="block text-sm text-gray-400 mb-2">Imagem 10:</label>
                                <input type="url" id="image10" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm" placeholder="URL da décima imagem">
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">💡 Deixe campos vazios para imagens que não usar</p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-4">
                        <button onclick="createPost()" class="bg-yellow-600 hover:bg-yellow-700 text-black font-semibold px-6 py-3 rounded-lg">
                            ✨ Publicar Postagem
                        </button>
                        <button onclick="clearForm()" class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg">
                            🗑️ Limpar Formulário
                        </button>
                    </div>
                </div>

                <!-- Posts Management -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">📋 Gerenciar Postagens</h3>
                    <div id="adminPostsList" class="space-y-3">
                        <!-- Lista de posts para gerenciamento -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-800 border-t border-gray-700 mt-16">
        <div class="max-w-6xl mx-auto px-4 py-8">
            <div class="grid md:grid-cols-3 gap-8">
                <!-- About -->
                <div>
                    <h3 class="text-lg font-semibold mb-4 gradient-text">Gire a Chave</h3>
                    <p class="text-gray-400 text-sm" data-translate="footer-about">
                        Portal especializado em veículos comerciais com informações confiáveis e atualizadas.
                    </p>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h4 class="text-md font-semibold mb-4">Links Rápidos</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" class="hover:text-yellow-400 transition-colors" data-translate="reviews">Avaliações</a></li>
                        <li><a href="#" class="hover:text-yellow-400 transition-colors" data-translate="news">Notícias</a></li>
                        <li><a href="#" class="hover:text-yellow-400 transition-colors" data-translate="tips">Dicas</a></li>
                        <li><a href="#" class="hover:text-yellow-400 transition-colors" data-translate="market">Mercado</a></li>
                    </ul>
                </div>
                
                <!-- Contact -->
                <div>
                    <h4 class="text-md font-semibold mb-4">Contato</h4>
                    <div class="text-sm text-gray-400 space-y-2">
                       <p class="hidden">📧 contato@gireachave.blog.br</p>
                       <p class="hidden">📱 WhatsApp: +55 11 99999-9999</p>

                        
                        <!-- Admin Access (Moved to Footer) -->
                        <div class="mt-4 pt-4 border-t border-gray-700">
                            <button onclick="showLoginModal()" class="text-xs text-gray-500 hover:text-yellow-400 transition-colors">
                                🔐 Acesso Administrativo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-4 text-center">
                <p class="text-gray-400 text-sm">
                    © 2025 Gire a Chave. Todos os direitos reservados.
                </p>
            </div>
        </div>
    </footer>

    <!-- LOGIN MODAL -->
    <div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-75 modal-backdrop flex items-center justify-center z-50">
        <div class="bg-gray-800 p-8 rounded-lg border border-gray-600 w-96">
            <h3 class="text-xl font-bold mb-6 text-center">🔐 Login Administrativo</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Usuário:</label>
                    <input type="text" id="loginUsername" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Digite seu usuário">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Senha:</label>
                    <input type="password" id="loginPassword" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2" placeholder="Digite sua senha">
                </div>
                <div id="loginError" class="hidden text-red-400 text-sm text-center"></div>
            </div>
            
            <div class="flex gap-3 mt-6">
                <button onclick="login()" class="flex-1 bg-yellow-600 hover:bg-yellow-700 text-black font-semibold py-2 rounded">
                    Entrar
                </button>
                <button onclick="hideLoginModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded">
                    Cancelar
                </button>
            </div>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-gray-400">🔒 Área restrita para Wagner Rodrigues</p>
            </div>
        </div>
    </div>

    <!-- IMAGE GALLERY MODAL -->
    <div id="imageModal" class="hidden fixed inset-0 bg-black bg-opacity-90 modal-backdrop flex items-center justify-center z-50">
        <div class="max-w-4xl max-h-screen p-4 relative">
            <button onclick="hideImageModal()" class="absolute top-4 right-4 text-white text-2xl z-10 hover:text-red-400">✕</button>
            
            <div class="text-center">
                <img id="modalImage" src="" alt="" class="max-w-full max-h-[80vh] object-contain rounded-lg">
                <div class="mt-4 flex justify-center gap-4">
                    <button onclick="previousImage()" class="bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded">⬅️ Anterior</button>
                    <span id="imageCounter" class="text-gray-400 px-4 py-2">1 / 10</span>
                    <button onclick="nextImage()" class="bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded">Próxima ➡️</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // CONFIGURAÇÕES GLOBAIS
        let currentLanguage = 'pt';
        let posts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
        let isAuthenticated = JSON.parse(localStorage.getItem('isAuthenticated') || 'false');
        let currentModal = { postId: null, imageIndex: 0, maxImages: 0 };

        // SISTEMA DE AUTENTICAÇÃO
        const adminCredentials = {
            username: 'warodrigues',
            password: 'gireachave_01'
        };

        // TRADUÇÕES
        const translations = {
            pt: {
                welcome: "Bem-vindo ao Gire a Chave",
                subtitle: "Seu portal completo para veículos comerciais. Informações, avaliações e dicas especializadas.",
                'footer-about': "Portal especializado em veículos comerciais com informações confiáveis e atualizadas.",
                reviews: "Avaliações",
                news: "Notícias", 
                tips: "Dicas",
                market: "Mercado",
                lists: "Listas",
                'read-more': "Leia mais",
                'view-gallery': "Ver galeria",
                share: "Compartilhar",
                comments: "Comentários"
            },
            en: {
                welcome: "Welcome to Gire a Chave",
                subtitle: "Your complete portal for commercial vehicles. Reliable and updated information, reviews and specialized tips.",
                'footer-about': "Portal specialized in commercial vehicles with reliable and updated information.",
                reviews: "Reviews",
                news: "News",
                tips: "Tips", 
                market: "Market",
                lists: "Lists",
                'read-more': "Read more",
                'view-gallery': "View gallery",
                share: "Share",
                comments: "Comments"
            },
            es: {
                welcome: "Bienvenido a Gire a Chave",
                subtitle: "Tu portal completo para vehículos comerciales. Información confiable y actualizada, evaluaciones y consejos especializados.",
                'footer-about': "Portal especializado en vehículos comerciales con información confiable y actualizada.",
                reviews: "Evaluaciones",
                news: "Noticias",
                tips: "Consejos",
                market: "Mercado", 
                lists: "Listas",
                'read-more': "Leer más",
                'view-gallery': "Ver galería",
                share: "Compartir",
                comments: "Comentarios"
            }
        };

        // GERENCIAMENTO DE IDIOMA
        window.setLanguage = (lang) => {
            currentLanguage = lang;
            localStorage.setItem('currentLanguage', lang);
            
            // Update active language button
            document.querySelectorAll('.flag').forEach(btn => btn.classList.remove('bg-yellow-600'));
            document.getElementById(`lang-${lang}`).classList.add('bg-yellow-600');
            
            // Translate elements
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            renderPosts();
        };

        // SISTEMA DE AUTENTICAÇÃO
        window.showLoginModal = () => {
            document.getElementById('loginModal').classList.remove('hidden');
            document.getElementById('loginUsername').focus();
        };

        window.hideLoginModal = () => {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginError').classList.add('hidden');
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
        };

        window.login = () => {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (username === adminCredentials.username && password === adminCredentials.password) {
                isAuthenticated = true;
                localStorage.setItem('isAuthenticated', 'true');
                localStorage.setItem('loginTimestamp', Date.now().toString());
                
                hideLoginModal();
                showAdminPanel();
            } else {
                const errorElement = document.getElementById('loginError');
                errorElement.textContent = '❌ Credenciais inválidas';
                errorElement.classList.remove('hidden');
            }
        };

        window.logout = () => {
            isAuthenticated = false;
            localStorage.setItem('isAuthenticated', 'false');
            localStorage.removeItem('loginTimestamp');
            hideAdminPanel();
        };

        const showAdminPanel = () => {
            document.getElementById('adminPanel').classList.remove('hidden');
            renderAdminPosts();
        };

        const hideAdminPanel = () => {
            document.getElementById('adminPanel').classList.add('hidden');
        };

        // GERENCIAMENTO DE POSTAGENS
        window.createPost = () => {
            const category = document.getElementById('postCategory').value;
            const titlePt = document.getElementById('titlePt').value;
            const titleEn = document.getElementById('titleEn').value; 
            const titleEs = document.getElementById('titleEs').value;
            const contentPt = document.getElementById('contentPt').value;
            const contentEn = document.getElementById('contentEn').value;
            const contentEs = document.getElementById('contentEs').value;

            // Collect up to 10 images
            const images = [];
            for (let i = 1; i <= 10; i++) {
                const imageUrl = document.getElementById(`image${i}`).value.trim();
                if (imageUrl) {
                    images.push(imageUrl);
                }
            }

            if (!titlePt || !contentPt) {
                alert('⚠️ Pelo menos título e conteúdo em português são obrigatórios!');
                return;
            }

            const post = {
                id: Date.now().toString(),
                category,
                title: { pt: titlePt, en: titleEn, es: titleEs },
                content: { pt: contentPt, en: contentEn, es: contentEs },
                images,
                date: new Date().toISOString(),
                author: 'Wagner Rodrigues'
            };

            posts.unshift(post);
            localStorage.setItem('blogPosts', JSON.stringify(posts));
            
            clearForm();
            renderPosts();
            renderAdminPosts();
            
            alert('✅ Postagem criada com sucesso!');
        };

        window.clearForm = () => {
            document.getElementById('postCategory').value = 'reviews';
            document.getElementById('titlePt').value = '';
            document.getElementById('titleEn').value = '';
            document.getElementById('titleEs').value = '';
            document.getElementById('contentPt').value = '';
            document.getElementById('contentEn').value = '';
            document.getElementById('contentEs').value = '';
            
            // Clear all 10 image inputs
            for (let i = 1; i <= 10; i++) {
                document.getElementById(`image${i}`).value = '';
            }
        };

        window.deletePost = (postId) => {
            if (confirm('🗑️ Tem certeza que deseja excluir esta postagem?')) {
                posts = posts.filter(post => post.id !== postId);
                localStorage.setItem('blogPosts', JSON.stringify(posts));
                renderPosts();
                renderAdminPosts();
            }
        };

        // COMPARTILHAMENTO SOCIAL
        window.sharePost = (postId, platform) => {
            const post = posts.find(p => p.id === postId);
            if (!post) return;

            const title = post.title[currentLanguage] || post.title.pt;
            const content = (post.content[currentLanguage] || post.content.pt).substring(0, 100) + '...';
            const url = window.location.href;

            switch (platform) {
                case 'facebook':
                    const fbUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(title + ' - ' + content)}`;
                    window.open(fbUrl, '_blank', 'width=600,height=400');
                    break;
                
                case 'whatsapp':
                    const waText = `*${title}*\n\n${content}\n\n${url}`;
                    const waUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(waText)}`;
                    window.open(waUrl, '_blank');
                    break;
                
                case 'email':
                    const subject = `Confira: ${title}`;
                    const body = `${title}\n\n${content}\n\nLeia mais em: ${url}`;
                    const emailUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                    window.location.href = emailUrl;
                    break;
            }
        };

        // GALERIA DE IMAGENS
        window.openGallery = (postId, imageIndex = 0) => {
            const post = posts.find(p => p.id === postId);
            if (!post || !post.images || post.images.length === 0) return;

            currentModal = {
                postId: postId,
                imageIndex: imageIndex,
                maxImages: post.images.length
            };

            document.getElementById('modalImage').src = post.images[imageIndex];
            document.getElementById('imageCounter').textContent = `${imageIndex + 1} / ${post.images.length}`;
            document.getElementById('imageModal').classList.remove('hidden');
        };

        window.hideImageModal = () => {
            document.getElementById('imageModal').classList.add('hidden');
        };

        window.nextImage = () => {
            const post = posts.find(p => p.id === currentModal.postId);
            if (!post) return;

            currentModal.imageIndex = (currentModal.imageIndex + 1) % post.images.length;
            document.getElementById('modalImage').src = post.images[currentModal.imageIndex];
            document.getElementById('imageCounter').textContent = `${currentModal.imageIndex + 1} / ${post.images.length}`;
        };

        window.previousImage = () => {
            const post = posts.find(p => p.id === currentModal.postId);
            if (!post) return;

            currentModal.imageIndex = currentModal.imageIndex === 0 ? post.images.length - 1 : currentModal.imageIndex - 1;
            document.getElementById('modalImage').src = post.images[currentModal.imageIndex];
            document.getElementById('imageCounter').textContent = `${currentModal.imageIndex + 1} / ${post.images.length}`;
        };

        // RENDERIZAÇÃO
        const renderPosts = () => {
            const container = document.getElementById('blogPosts');
            
            if (posts.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">📝</div>
                        <h3 class="text-xl font-semibold mb-2">Nenhuma postagem ainda</h3>
                        <p class="text-gray-400">As postagens aparecerão aqui quando forem publicadas.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = posts.map(post => {
                const title = post.title[currentLanguage] || post.title.pt;
                const content = post.content[currentLanguage] || post.content.pt;
                const date = new Date(post.date).toLocaleDateString(currentLanguage === 'pt' ? 'pt-BR' : currentLanguage === 'en' ? 'en-US' : 'es-ES');
                
                const categoryEmojis = {
                    reviews: '⭐',
                    news: '📰', 
                    tips: '💡',
                    market: '📈',
                    lists: '📋'
                };

                // Create image gallery HTML
                let galleryHtml = '';
                if (post.images && post.images.length > 0) {
                    if (post.images.length === 1) {
                        galleryHtml = `
                            <div class="mt-4">
                                <img src="https://hatchcanvas.com/_/assets/ab_avksbwJE6tyhFOD6dljjI/keys//${post.images[0]}" alt="Post image" 
                                     onclick="openGallery('${post.id}', 0)"
                                     class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity">
                            </div>
                        `;
                    } else {
                        galleryHtml = `
                            <div class="image-gallery mt-4">
                                ${post.images.map((img, index) => `
                                    <img src="https://hatchcanvas.com/_/assets/ab_avksbwJE6tyhFOD6dljjI/keys//${img}" alt="Post image ${index + 1}" 
                                         onclick="openGallery('${post.id}', ${index})"
                                         class="w-full h-32 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity">
                                `).join('')}
                            </div>
                        `;
                    }
                }

                return `
                    <article class="bg-gray-800 rounded-lg border border-gray-700 p-6 hover:border-gray-600 transition-colors">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-lg">${categoryEmojis[post.category] || '📝'}</span>
                                    <span class="text-sm text-yellow-400 font-medium capitalize">${post.category}</span>
                                    <span class="text-sm text-gray-500">•</span>
                                    <span class="text-sm text-gray-400">${date}</span>
                                </div>
                                <h3 class="text-2xl font-bold mb-3 text-white hover:text-yellow-400 transition-colors cursor-pointer">
                                    ${title}
                                </h3>
                            </div>
                        </div>
                        
                        <div class="text-gray-300 leading-relaxed">
                            ${content.substring(0, 300)}${content.length > 300 ? '...' : ''}
                        </div>

                        ${galleryHtml}

                        <div class="flex flex-wrap gap-3 mt-6 pt-4 border-t border-gray-700">
                            ${content.length > 300 ? `<button class="text-yellow-400 hover:text-yellow-300 text-sm font-medium">${translations[currentLanguage]['read-more']}</button>` : ''}
                            
                            ${post.images && post.images.length > 1 ? `
                                <button onclick="openGallery('${post.id}', 0)" class="text-blue-400 hover:text-blue-300 text-sm font-medium">
                                    📸 ${translations[currentLanguage]['view-gallery']} (${post.images.length})
                                </button>
                            ` : ''}

                            <!-- Social Share Buttons -->
                            <div class="flex gap-2 ml-auto">
                                <button onclick="sharePost('${post.id}', 'facebook')" 
                                        class="social-btn bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                    📘 Facebook
                                </button>
                                <button onclick="sharePost('${post.id}', 'whatsapp')" 
                                        class="social-btn bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm">
                                    📱 WhatsApp
                                </button>
                                <button onclick="sharePost('${post.id}', 'email')" 
                                        class="social-btn bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                                    📧 Email
                                </button>
                            </div>
                        </div>

                        <!-- Comments Section -->
                        <div class="mt-6 pt-4 border-t border-gray-700">
                            <div id="disqus_thread_${post.id}" class="min-h-[100px]">
                                <div class="text-center py-8 text-gray-500">
                                    <div class="text-3xl mb-2">💬</div>
                                    <p class="text-sm">${translations[currentLanguage].comments}</p>
                                    <p class="text-xs mt-1">Sistema de comentários será ativado em breve</p>
                                </div>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
        };

        const renderAdminPosts = () => {
            const container = document.getElementById('adminPostsList');
            
            if (posts.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-center py-4">Nenhuma postagem criada ainda.</p>';
                return;
            }

            container.innerHTML = posts.map(post => `
                <div class="bg-gray-700 rounded p-4 flex justify-between items-center">
                    <div>
                        <h4 class="font-semibold">${post.title.pt}</h4>
                        <p class="text-sm text-gray-400">
                            ${post.category} • ${new Date(post.date).toLocaleDateString('pt-BR')} • ${post.images ? post.images.length : 0} imagens
                        </p>
                    </div>
                    <button onclick="deletePost('${post.id}')" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                        🗑️ Excluir
                    </button>
                </div>
            `).join('');
        };

        // KEYBOARD SHORTCUTS
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                hideLoginModal();
                hideImageModal();
            } else if (e.key === 'Enter' && !document.getElementById('loginModal').classList.contains('hidden')) {
                login();
            } else if (e.key === 'ArrowLeft' && !document.getElementById('imageModal').classList.contains('hidden')) {
                previousImage();
            } else if (e.key === 'ArrowRight' && !document.getElementById('imageModal').classList.contains('hidden')) {
                nextImage();
            }
        });

        // INICIALIZAÇÃO
        const init = () => {
            // Check authentication status
            const loginTimestamp = localStorage.getItem('loginTimestamp');
            if (isAuthenticated && loginTimestamp) {
                const hoursSinceLogin = (Date.now() - parseInt(loginTimestamp)) / (1000 * 60 * 60);
                if (hoursSinceLogin > 24) {
                    logout();
                } else {
                    showAdminPanel();
                }
            }

            // Load language preference
            const savedLanguage = localStorage.getItem('currentLanguage') || 'pt';
            setLanguage(savedLanguage);
            
            // Render posts
            renderPosts();
            
            console.log('🚛 Blog Gire a Chave carregado com sucesso!');
            console.log(`📊 Total de postagens: ${posts.length}`);
            console.log(`🌐 Idioma atual: ${currentLanguage}`);
        };

        // Make functions globally available
        window.createPost = createPost;
        window.clearForm = clearForm;
        window.deletePost = deletePost;
        window.login = login;
        window.logout = logout;
        window.showLoginModal = showLoginModal;
        window.hideLoginModal = hideLoginModal;
        window.sharePost = sharePost;
        window.openGallery = openGallery;
        window.hideImageModal = hideImageModal;
        window.nextImage = nextImage;
        window.previousImage = previousImage;

        // Initialize when DOM is ready
        init();
    </script>
</body>
</html>
